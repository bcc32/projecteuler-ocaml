(library
 ((name euler_solutions)
  (synopsis "A collection of OCaml solutions to ProjectEuler problems")
  (libraries (bignum
              core
              euler
              re))
  (preprocess (pps (ppx_jane)))
  (inline_tests)
  (modules (:standard \ template))))

(rule
 ((targets (euler_solutions.ml-gen))
  (deps (module-list.pl (glob_files sol*.ml)))
  (action (with-stdout-to ${@} (run perl ${<})))))

(alias
 ((name runtest)
  (action (diff euler_solutions.ml euler_solutions.ml-gen))))
